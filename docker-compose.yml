name: trascendence
services:
  proxy:
    depends_on:
      - frontend
      - api
    ports:
      - '127.0.0.1:443:443'
    extends:
      file: backend/proxy/docker/docker-compose.proxy.yml
      service: proxy

  frontend:
    extends:
      file: frontend/docker/docker-compose.frontend.yml
      service: frontend

  api:
    env_file:
      - .env
    depends_on:
      - users
      - tournaments
    extends:
      file: backend/api/docker/docker-compose.api.yml
      service: api

  users:
    env_file:
      - .env
    extends:
      file: backend/users/docker/docker-compose.users.yml
      service: users
    

  tournaments:
    env_file:
      - .env
    extends:
      file: backend/tournaments/docker/docker-compose.tournaments.yml
      service: tournaments

volumes:
  users_data: null
  tournaments_data: null
